<!DOCTYPE html>
<html>
    <head>
        <title>{{ head.title }}</title>
        {{{ head.meta_tags }}}
        {{{ head.config }}}

        <link href="{{ head.favicon }}" rel="shortcut icon">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link href="{{cdn '/assets/css/theme.css'}}" rel="stylesheet">
        {{> components/common/fonts fonts=(pick theme_settings "fontFamily-sans" "fontFamily-serif" "fontFamily-headings" "fontFamily-hero") }}
        <script src="{{cdn '/assets/modernizr-custom.js'}}"></script>

        {{{ head.scripts }}}
        {{{ head.rsslinks }}}

        {{inject 'themeImageSizes' theme_images}}
        {{inject 'genericError' (lang 'common.generic_error')}}
        
    </head>
    <body>
        {{> components/common/icons/icon-defs }}
        {{> components/common/header }}
        {{> components/common/body }}
        {{> components/common/footer }}

        <script>
            function startupApp(stencilBootstrap) {
                stencilBootstrap("{{template_file}}", {{jsContext}}).load();
            }
        </script>

        {{#if in_production}}
            <script src="{{cdn '/assets/js/bundle.js'}}"></script>
            <script>
                startupApp(stencilBootstrap);
            </script>
        {{else}}
            <script src="{{cdn '/assets/jspm_packages/system.js'}}"></script>
            <script src="{{cdn '/assets/config.js'}}"></script>
            <script src="{{cdn '/assets/js/dependency-bundle.js'}}"></script>
            <script>
                System.import("js/app").then(function(){ startupApp(stencilBootstrap)});
            </script>
        {{/if}}
        {{footer.scripts}}
    </body>
</html>
