---
product:
    videos:
        limit: {{theme_settings.productpage_videos_count}}
    reviews:
        limit: {{theme_settings.productpage_reviews_count}}
    related_products:
        limit: 10
    similar_by_views:
        limit: {{theme_settings.productpage_similar_by_views_count}}
---
{{inject 'productId' product.id}}

{{#partial "page"}}




 {{inject 'productId' product.id}} 




    {{> components/common/breadcrumbs breadcrumbs=breadcrumbs}}

    {{#each product.shipping_messages}}
        {{> components/common/alert/alert-info message}}
    {{/each}}

    <div>
        {{> components/products/product-view}}

        {{{region name="product_below_content"}}}

        {{#if product.videos.list.length}}
            {{> components/products/videos product.videos}}
        {{/if}}

        {{#all settings.show_product_reviews theme_settings.show_product_reviews (if theme_settings.show_product_details_tabs '!==' true)}}
            {{> components/products/reviews reviews=product.reviews product=product urls=urls}}
        {{/all}}

        {{> components/products/tabs}}
    </div>

    {{> components/products/schema}}

    <style>

        /* BANNER SECTION */
        
        .button-banner{
            background: linear-gradient(270deg, #990AE2 1.67%, #1485EF 96.39%);
            border: none;
            color: rgb(255, 255, 255);
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }
        .h-banner
        {
            text-align: center;
            margin-bottom: 25px;
        
        }
        .row-banner
        {
            display: flex;
            align-items: center;
            text-align: center;background-color: rgb(236, 236, 236);
            border-radius: 10px;margin-top: 30px;
        }
        .img-banner
        {
            width: auto;
            margin-top:7px ;
        }
        .col-banner
        {
            border-left: solid black 0.5px;
            border-right: solid black 0.5px;
        }
        .price-banner
        {
            margin-top: 20px;
        }
        
        /* END BANNER SECTION */
        
        
        /* PRODUCT SECTION */
        .button-product
        {
            background: linear-gradient(270deg, #990AE2 1.67%, #1485EF 96.39%);
            border: none;
            color: rgb(255, 255, 255);
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 10px;
        }
        .card-product
        {
            border: 5px solid transparent;
            background-color:linear-gradient(#420ede, #af4cb3);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: box-shadow 0.3s ease;  
            height: 360.31px;
        }
        .card-product
        {
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);text-align: center;
        }
        .product-name
        {
            font-weight: bold;text-align: left;
        }
        .product-price
        {
            text-align: left;
        }
        .product-image-none{

            margin-top: 80px;
        }
        .product-none
        {
            border: solid 2px purple;
        }
        .card-product.bundled 
        {
            border-color: rgb(141, 15, 128); /* Change border color when bundled */
        }
        .button-product.remove {
            background-color: #881ca9; /* Change button color when in bundled state */
        }
        
        /* END PRODUCT SECTION */
        
        
        
        
        /* TEXT SECTION */
        
        .text-main
        {
            text-align: center;  background:linear-gradient(to right,#420ede, #af4cb3);
            background-clip: text;
            -webkit-text-fill-color: transparent;font-size: x-large;font-weight: bolder;
        }
        .text-local
        {
            text-align: center;font-weight: bold;margin-bottom: 50px;
        }

        .pp{
            background: linear-gradient(270deg, #1cb824 1.67%, #3b33d7 96.39%);;
        }
        

        #popup-window {
            position: fixed;
            width: 300px;
            height: 200px;
            background: white;
            border: 1px solid black;
            padding: 10px;
            margin: auto;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            z-index: 10;
            display: none;
        }  
        
        
        /* END TEXT SECTION */


        
        </style>  



        <div class="row row-banner">
            <div class="small-1 columns col123"><img class="img-banner" src="https://cdn11.bigcommerce.com/s-8mw570y811/images/stencil/900w/products/116/452/best__16337__02178.1684413436.png" alt="">
            </div>
         <div class="small-2 columns"><h4 class="h-banner">522GW</h4></div>
            <div class="small-4 columns col-banner">Choose add-ons and services to create your bundle, or say “None.”</div>
            <div class="small-2 columns"><h4 class="price-banner">£169.00</h4>
            </div>
            <div class="small-3 columns"><a href="http://localhost:3000/cart.php?action=add&product_id={{id}}"><button class="button-banner">Add to Cart</button></a></div>
        </div>

    
    <h1 class="text-main">Add a rear-facing camera module for much more protection.</h1>
    <p class="text-local">Only one camera can be used at a time.</p>
    
<div class="row">
    {{#each product.related_products}}
    <div class="small-12 medium-6 large-3 columns">   
    <div class="card card-product">
        <div class="card-sction">
        <h4 class="product-name">{{name}}</h4>
        <p class="product-price">{{price.without_tax.formatted}}</p>
        <a href="{{url}}"><img class="product-image" src="{{getImageSrcset image (cdn theme_settings.default_image_product) 1x='128x128' }}" alt=""></a>
        <button class="button-product"  data-sku={{sku}} data-price={{price.without_tax.formatted}} data-image="{{getImageSrcset image (cdn theme_settings.default_image_product) 1x='128x128' }}" onclick="toggleBundle(this)">Add To Bundle</button>
        <button class="button-product pp left"  id="popup-link">More</button>
        </div>
    </div>
    </div>
    {{/each}} 



    <div class="small-12 medium-6 large-3 columns">   
        <div class="card card-product product-none">
            <div class="card-sction">
                <img class="product-image-none" src="https://cdn11.bigcommerce.com/s-o257sk57z9/images/stencil/original/image-manager/nothanks.png?t=1662972940&_gl=1*183hi9z*_ga*MTc3Njg0NTM2NC4xNjQzMDkyMzIw*_ga_WS2VZYPC6G*MTY2Mjk3MjM4Mi40MDUuMS4xNjYyOTcyOTU0LjU4LjAuMA.." alt="">
                <h4>None</h4>

            </div>
        </div> 
    </div>
</div>


<div id="popup-window">
    <h1>Pop-up Window</h1>
    <p>This is a pop-up window.</p>
    <button id="close-button">Close</button>
</div> 


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script>
    function toggleBundle(button) {
      var card = button.closest('.card-product');
      if (card.classList.contains('bundled')) {
          card.classList.remove('bundled');
          button.textContent = 'Add To Bundle'; 
          button.classList.remove('remove');
          $('.col-banner').html('<div>Choose add-ons and services to create your bundle, or say “None.”</div>');
      } else {
          var imageUrl = $(button).data("image");
          var price = $(button).data("price")
          card.classList.add('bundled');
          button.textContent = 'Remove';
          button.classList.add('remove');
          $('.col-banner').append('<img src="' + imageUrl + '">');
          $('.price-banner').html(`<div>${price}</div>`)
        
      }
  }

    function removeBundledProduct(){
        $('.card-product.bundle').each(function(){
            $(this).removeClass('bundle');
            $(this).find('.button-product').text('Add To Bundle').removeClass('remove');

        });

        $('.col-banner').html('<div>Choose add-ons and services to create your bundle, or say “None.”</div>');
    }
    $('.product-none').click(function(){
        removeBundledProduct();
    })
  </script>


<!-- ---------------------------------------END OF  ----------------------------------------------------->





<!-------------------------------------------- graphqlscript ----------------------------------------------------->
  <script>

//    const jsContext = JSON.parse({{ jsContext }});
//    console.log('what is inside jsContext',jsContext)

 
    fetch('/graphql', {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer {{ settings.storefront_api.token }}' // use auto-generated token
      },
      body: JSON.stringify({
        query: `query brand {
            site {
                brand(entityId: 39) {
                    entityId
              
                    name
                    products {
                        edges {
                            node {
                                name
                                entityId
                                sku
                                images{
                                    edges{
                                        node{
                                            urlOriginal
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }`
      })
    })
    .then(res => res.json())
    .then(data => {
    // console.log('what is my data',data.data.site.brand)
    console.log('what is my data',data.data.site.brand.products)   
    //  console.log(typeof(product1))

 

     
        // console.log(element.node)
        // console.log(element.node.name)
        // console.log(element.addToCartUr)
        var product = data.data.site.brand.products.edges;
        // var product_name = node.name;
        // console.log('productname',product_name)
        // var addToCartUrl = element.node.addToCartUrl;
        // console.log('addToCartUrl',addToCartUrl)
        const productCardsHTML = product.map(edge=> `
        
        <div class="row product-card">
            <div class="small-12 medium-6 large-4 columns">
                <h4>${edge.node.name}</h4>
                <img src="${edge.node.images.edges[0].node.urlOriginal}"></img>
                <p>${edge.node.sku}</p>
                <a href="/cart.php?action=add&product_id=${edge.node.entityId}"><button>Add to Cart</button></a>
            </div>
            
        </div>
        
        
        `).join('');

          
        document.getElementById('productCards').innerHTML = productCardsHTML;
    })

  
//      const brands = data.data.site.brand.products.edges;

//       console.log('brands',brands)

  
//    brands.forEach(element => {
//       console.log(element)
//       console.log(element.node.name)

//    });


.catch(error => console.error(error));


</script>


<!-------------------------------------------- graphqlhtml ----------------------------------------------------->


<div id="productCards">

</div>


<!-------------------------------------------- graphqlcss ----------------------------------------------------->


<style>
.product-card {
        border-radius: 6px;
        box-shadow: rgb(29, 28, 28);
        margin: 10px;
        width: 250px;
        height: 400px;
        display: inline-block;
        background-color: rgb(240, 230, 230);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 2px solid rgb(14, 14, 15);
        padding: 5px;
        
}

.product-card h4 {
    margin-top: 10px;
    font-weight: bold;
    margin-left: 50px;

}

.product-card img {
    max-width: 200%;
    margin-left: 50px;
    height: 100px;
    margin-bottom: 10px;
}

.product-card p {
    margin-top: 5px;
    margin-left: 50px;
}

.product-card button {
    background: linear-gradient(270deg, #62cd5b 1.67%, #e85cdf 96.39%);
    border: none;
    color: rgb(255, 255, 255);
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    cursor: pointer;
    border-radius: 5px;
    margin-top: 10px;
    width: 200px;
    justify-content: end;
}

.product-card button:hover {
    background-color: #0056b3;
}

</style>





<script>

    var popupLink = document.getElementById("popup-link");
    var popupWindow = document.getElementById("popup-window");
    var closeButton = document.getElementById("close-button");

    popupLink.addEventListener("click", function(event) {
      event.preventDefault();
      popupWindow.style.display = "block";
    });
    closeButton.addEventListener("click", function() {
      popupWindow.style.display = "none";
    });
</script>  


{{/partial}}
{{> layout/base}}
{{inject "myProductName" product.title}}