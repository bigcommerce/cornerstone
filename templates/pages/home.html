---
products:
    new:
        limit: {{theme_settings.homepage_new_products_count}}
        images: 2
    featured:
        limit: {{theme_settings.homepage_featured_products_count}}
        images: 2
    top_sellers:
        limit: {{theme_settings.homepage_top_products_count}}
        images: 2
carousel: {{theme_settings.homepage_show_carousel}}
categories:
curation: {{theme_settings.homepage_show_curation_module}}
blog:
    recent_posts:
        limit: {{theme_settings.homepage_blog_posts_count}}
gql: "query getLocations {
    inventory {
        locations {
            edges {
                node {
                    label
                    operatingHours {
                        monday {
                          opening
                          closing
                          open
                        }
                        tuesday {
                          opening
                          closing
                          open
                        }
                        wednesday {
                          opening
                          closing
                          open
                        }
                        thursday {
                          opening
                          closing
                          open
                        }
                        friday {
                          opening
                          closing
                          open
                        }
                        saturday {
                          opening
                          closing
                          open
                        }
                        sunday {
                          opening
                          closing
                          open
                        }
                      }
                    address {
                        label
                        city
                        postalCode
                    }
                }
            }
        }
    }
}"
---

{{inject "categoryBlockCarouselLimit" theme_settings.mwn_home_category_block_limit}}
{{inject "categoryBlockCarouselCol" theme_settings.mwn_home_category_block_col}}
{{#filter categories theme_settings.mwn_home_category_block_id property="id"}}
    {{assignVar "categoryBlockUrl" url}}
    {{assignVar "categoryBlockId" id}}
    {{assignVar "categoryBlockName" name}}
{{/filter}}

{{#partial "hero"}}
    {{{region name="home_below_menu"}}}
    {{#if theme_settings.homepage_show_mobile_carousel}}
        {{#if categories}}
            {{> components/category/circle-list categories=categories}}
        {{/if}}
    {{/if}}
    {{#if carousel}}
        {{> components/carousel arrows=theme_settings.homepage_show_carousel_arrows dots=theme_settings.homepage_show_carousel_dots infinite=theme_settings.homepage_carousel_infinite}}
    {{/if}}
    {{{region name="home_below_carousel"}}}
    {{#if products.featured}}
        <div class="container">
            {{> components/products/featured products=products.featured columns=theme_settings.homepage_featured_products_column_count}}
        </div>
    {{/if}}
    {{{region name="home_below_featured_products"}}}
    <!-- QUICK INTRO GOES HERE -->
    {{> components/info/quick-intro}}
    {{#if categories}}
        <div class="container">
            <div class="homePage-category">
                {{> components/category/list categories=(limit categories theme_settings.homepage_category_count)}}
            </div>
        </div>
    {{/if}}

    {{#if theme_settings.homepage_featured_vendor}}
        {{> components/vendor/featuredVendor}}
    {{/if}}

    <!-- TWO COL ABOUT SECTION GOES HERE-->
    {{> components/info/expanded-intro locations=gql.data.inventory.locations.edges}}
{{/partial}}

{{#partial "page"}}

    {{#each shipping_messages}}
        {{> components/common/alert-info message}}
    {{/each}}

<div class="main full">
    {{#if theme_settings.homepage_show_top_products}}
        {{#if products.top_sellers}}
            {{> components/products/top products=products.top_sellers columns=theme_settings.homepage_top_products_column_count}}	
        {{/if}}
    {{/if}}
    {{#if products.new}}
        {{> components/products/new products=products.new columns=theme_settings.homepage_new_products_column_count}}
    {{/if}}
    {{{region name="home_below_new_products"}}}
    {{#if theme_settings.mwn_home_category_block}}
    <div class="mwn-block mwn-block-product padding-vertical" data-category-id="{{getVar "categoryBlockId"}}" data-category-url="{{getVar "categoryBlockUrl"}}" id="category-product-{{getVar "categoryBlockId"}}">
        <div class="loadingOverlay"></div>
        <div class="container">
            <div class="mwn-block-header">
                <h2 class="page-heading">
                    {{#if theme_settings.mwn_home_category_block_heading}}
                        {{theme_settings.mwn_home_category_block_heading}}
                    {{else}}
                        {{getVar "categoryBlockName"}}
                    {{/if}}
                </h2>
            </div>
            <div class="productCarousel-wrapper">
                <div class="productCarousel"></div>
            </div>
        </div>
    </div>
    {{/if}}
</div>
{{/partial}}
{{> layout/base}}
